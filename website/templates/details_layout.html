{% extends "bootstrap/base.html" %}
{% block title %} Movie Rating {%endblock%}

{% block scripts %}
<link rel="stylesheet" href="{{url_for('.static', filename='css/style.css')}}">
{{ super() }}
{% endblock %}

{% block navbar %}
    {{nav.top.render(renderer='custom')}}
{%endblock%}

{% block content %}
<script src="{{url_for('static', filename='js/highcharts.js') }}"></script>
    <div class="center"> 
    <table border="0" style="max-width: 900px;  margin: 0 auto">
        <tr style="height:70px;">
        </tr>
        <tr><td width="50"> 
            <td><p><img src="{{movie['giant_cover_url']}}" width="320" height="430">
                        </p>
            </td>
            <td width="100">            
            </td>
            <td>
                <table border="0">
                    {%for keyword in info_cols%}
                    <tr><td width="500">
                        {%if keyword == 'runtimes' %}
                        <b>Runtime : </b>{{movie[keyword]}} mins
                        {% elif keyword == 'year' %}
                        <b>Year : </b>{{movie[keyword]}}
                        {% elif movie[keyword]=='-' %}
                        <b>{{name[keyword]}} : </b>No information  
                        {% else %}
                        <b> {{name[keyword]}} : </b>
                            {%for item in movie[keyword] %}
                                {{item}},
                            {% endfor %}
                        {% endif %}
                        </td>
                        </tr>
                    {% endfor %}
                </table>
            </td>
            </tr>
        </table>

        <table>
            <tr><td width="100"></td><td width="200">Predicted date: 
            </td>
                <td>{{movie['predict_time']}}
            </td><td width="50"></td>
            </tr>
            <tr><td width="100"></td><td>Predicted info: 
            </td>
                <td>
                        {{movie['predict_text']}}
            </td>
            </tr>
            <tr><td width="100"></td><td>SHA-256: 
            </td>
                <td>{{movie['sha256']}}
            </td>
            </tr>
            <tr><td width="100"></td><td>Verified link: 
            </td>
                <td><a href='{{movie['verify_url']}}'>LINK</a>
            </td>
            </tr></table>
        <table style="max-width: 1000px; height: 400px; margin: 0 auto">
            <tr>
                <td>
                <div id="container" style="width: 700px; height: 400px; margin: 0 auto"></div>
                </td>
                <td>
                    <table class="table table-hover">
                    <thead class="thead-default">
                    <tr><th>Metrics</th>
                        <th>    </th>
                        <th>Value</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>{%for m in metrics%}
                        <td>{{name[m]}}</td>
                        <td></td>
                        <td>{{movie['metrics'][m]}}</td>
                        </tr>
                        <tr>
                        {% endfor %}
                    </tr>
                    </tbody>
                    </table>
                </td>
            </tr>
        </table>
    </div>

    <script type="text/javascript">
        Highcharts.chart('container', {
            chart: {
                type: 'line'
            },
            title: {
                text: 'Rating Distribution Comparison'
            },
            xAxis: {
                text: 'Rating Score',
                categories: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10']
            },
            yAxis: {
                title: {
                    text: 'Percentage(%)'
                }
            },
            plotOptions: {
                line: {
                    dataLabels: {
                        enabled: true
                    },
                    enableMouseTracking: true
                }
            },
            series: [{
                name: 'Predicted Distribution',
                color: '#4D4DFF',
                data: [{% for rating in movie['rating'] %}{{rating}}/100{% if loop.index ==10%}
                            ]
                            },{
                                name: 'Real Distribution',
                                color:'#000000',
                                data: [
                            {% elif loop.index == 20 %}]}{% else%},{% endif %}
                        {% endfor %}]
        });
    </script>
{% endblock %}